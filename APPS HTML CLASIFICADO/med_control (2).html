<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor de presion Arterial</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ddd1c1;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(117, 170, 219, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(91, 191, 33, 0.08) 0%, transparent 50%);
            min-height: 100vh;
            padding: 20px;
            color: #2b2b28;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 16px;
            border: 1px solid #ddd1c1;
            box-shadow: 
                0 1px 3px rgba(43, 43, 40, 0.1),
                0 4px 6px rgba(43, 43, 40, 0.05),
                0 10px 15px -3px rgba(43, 43, 40, 0.05);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #002b7f 0%, #75aadb 50%, #002b7f 100%);
            color: white;
            padding: 32px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
        }

        .header h1 {
            position: relative;
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.025em;
            text-shadow: 0 2px 4px rgba(0, 43, 127, 0.3);
        }

        .header p {
            position: relative;
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
        }

        .nav-tabs {
            display: flex;
            background: #ddd1c1;
            border-bottom: 1px solid #ddd1c1;
        }

        .nav-tab {
            flex: 1;
            padding: 16px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: #2b2b28;
            transition: all 0.2s ease;
            position: relative;
            letter-spacing: 0.025em;
        }

        .nav-tab.active {
            background: #ffffff;
            color: #002b7f;
            border-bottom: 2px solid #002b7f;
        }

        .nav-tab:hover:not(.active) {
            background: #ffffff;
            color: #2b2b28;
        }

        .tab-content {
            display: none;
            padding: 32px;
            animation: fadeIn 0.3s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2b2b28;
            font-size: 14px;
            letter-spacing: 0.025em;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1.5px solid #ddd1c1;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            background: #ffffff;
            color: #2b2b28;
            transition: all 0.2s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #002b7f;
            background: #fefefe;
            box-shadow: 0 0 0 3px rgba(0, 43, 127, 0.1);
        }

        input::placeholder {
            color: #75aadb;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-right: 12px;
            margin-bottom: 12px;
            text-decoration: none;
            letter-spacing: 0.025em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #002b7f 0%, #75aadb 100%);
            color: white;
            box-shadow: 0 1px 3px rgba(0, 43, 127, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #75aadb 0%, #002b7f 100%);
            box-shadow: 0 4px 12px rgba(0, 43, 127, 0.4);
            transform: translateY(-1px);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef2b2d 0%, #ef6b00 100%);
            color: white;
            box-shadow: 0 1px 3px rgba(239, 43, 45, 0.3);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #ef6b00 0%, #ef2b2d 100%);
            box-shadow: 0 4px 12px rgba(239, 43, 45, 0.4);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #ddd1c1;
            color: #2b2b28;
            border: 1px solid #ddd1c1;
        }

        .btn-secondary:hover {
            background: #ffffff;
            border-color: #75aadb;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: #ffffff;
            border: 1px solid #ddd1c1;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(43, 43, 40, 0.1);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ffc61e, #ef6b00, #5bbf21);
        }

        .stat-card:hover {
            box-shadow: 0 4px 12px rgba(43, 43, 40, 0.15);
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 8px;
            color: #2b2b28;
            line-height: 1;
        }

        .stat-label {
            font-size: 14px;
            color: #75aadb;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .chart-container {
            position: relative;
            height: 420px;
            margin-bottom: 32px;
            background: #ffffff;
            border-radius: 12px;
            border: 1px solid #ddd1c1;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(43, 43, 40, 0.1);
        }

        .readings-table {
            width: 100%;
            border-collapse: collapse;
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(43, 43, 40, 0.1);
            border: 1px solid #ddd1c1;
        }

        .readings-table th,
        .readings-table td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid #ddd1c1;
            font-size: 14px;
            color: #2b2b28;
        }

        .readings-table th {
            background: #ddd1c1;
            font-weight: 700;
            color: #2b2b28;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 0.05em;
        }

        .readings-table tbody tr {
            transition: background-color 0.2s ease;
        }

        .readings-table tbody tr:hover {
            background: #ddd1c1;
        }

        .readings-table tbody tr:last-child td {
            border-bottom: none;
        }

        .risk-indicator {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .risk-normal { 
            background: #5bbf21; 
            color: white;
            border: 1px solid #5bbf21;
        }
        
        .risk-elevated { 
            background: #ffc61e; 
            color: #2b2b28;
            border: 1px solid #ffc61e;
        }
        
        .risk-stage1 { 
            background: #ef6b00; 
            color: white;
            border: 1px solid #ef6b00;
        }
        
        .risk-stage2 { 
            background: #ef2b2d; 
            color: white;
            border: 1px solid #ef2b2d;
        }
        
        .risk-crisis { 
            background: #ef2b2d; 
            color: white;
            border: 1px solid #ef2b2d;
        }

        .profile-card {
            background: linear-gradient(135deg, #75aadb 0%, #ddd1c1 100%);
            border: 1px solid #75aadb;
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(117, 170, 219, 0.2);
        }

        .profile-card h3 {
            color: #002b7f;
            font-weight: 700;
            margin-bottom: 16px;
            font-size: 18px;
        }

        .recommendations {
            background: linear-gradient(135deg, #ddd1c1 0%, #ffffff 100%);
            border-left: 4px solid #002b7f;
            border-radius: 0 8px 8px 0;
            padding: 24px;
            margin: 24px 0;
            box-shadow: 0 1px 3px rgba(43, 43, 40, 0.05);
        }

        .recommendations h4 {
            color: #002b7f;
            font-weight: 700;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid;
            font-weight: 500;
        }

        .alert-success { 
            background: rgba(91, 191, 33, 0.1); 
            color: #2b2b28; 
            border-color: #5bbf21; 
        }
        
        .alert-warning { 
            background: rgba(255, 198, 30, 0.1); 
            color: #2b2b28; 
            border-color: #ffc61e; 
        }
        
        .alert-error { 
            background: rgba(239, 43, 45, 0.1); 
            color: #2b2b28; 
            border-color: #ef2b2d; 
        }

        /* Elementos médicos específicos */
        .medical-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            opacity: 0.7;
        }

        .blood-pressure-reading {
            font-family: 'JetBrains Mono', Monaco, Consolas, monospace;
            font-weight: 600;
            font-size: 16px;
        }

        .vital-signs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }

        .vital-sign {
            background: #ffffff;
            border: 1px solid #ddd1c1;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }

        .vital-sign .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2b2b28;
            margin-bottom: 4px;
        }

        .vital-sign .unit {
            font-size: 12px;
            color: #75aadb;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .container { 
                margin: 10px; 
                border-radius: 12px;
            }
            
            .header {
                padding: 24px;
            }
            
            .header h1 {
                font-size: 1.875rem;
            }
            
            .nav-tabs { 
                flex-direction: column; 
            }
            
            .nav-tab {
                text-align: left;
                padding: 16px 20px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .form-row { 
                grid-template-columns: 1fr; 
            }
            
            .stats-grid { 
                grid-template-columns: 1fr; 
            }
            
            .readings-table th,
            .readings-table td {
                padding: 12px 16px;
                font-size: 13px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .tab-content {
                padding: 16px;
            }
        }
    </style>
</head>

<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold text-center">Monitor de Salud Integral</h1>
        <h2 class="text-xl text-center mb-4">Sistema Completo de Control Médico</h2>

        <!-- Pestañas de Navegación -->
        <div class="flex flex-wrap justify-center gap-2 mb-4">
            <a href="#perfil" class="tab-link p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Perfil</a>
            <a href="#presion" class="tab-link p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Presión</a>
            <a href="#vitales" class="tab-link p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Vitales</a>
            <a href="#medicamentos" class="tab-link p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Medicamentos</a>
            <a href="#dashboard" class="tab-link p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Dashboard</a>
            <a href="#historial" class="tab-link p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Historial</a>
        </div>

        <!-- Sección Perfil -->
        <div id="perfil" class="mb-8">
            <h2 class="text-xl font-bold mb-4">Información del Paciente</h2>
            <form id="profile-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block">Nombre Completo:</label>
                        <input type="text" id="nombre" class="w-full p-2 border rounded" placeholder="Nombre Completo">
                    </div>
                    <div>
                        <label class="block">Fecha de Nacimiento:</label>
                        <input type="date" id="fechaNacimiento" class="w-full p-2 border rounded">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block">Peso (kg):</label>
                        <input type="number" id="peso" class="w-full p-2 border rounded" placeholder="Peso (kg)">
                    </div>
                    <div>
                        <label class="block">Altura (cm):</label>
                        <input type="number" id="altura" class="w-full p-2 border rounded" placeholder="Altura (cm)">
                    </div>
                </div>
                <div>
                    <label class="block">Género:</label>
                    <select id="genero" class="w-full p-2 border rounded">
                        <option value="">Seleccionar</option>
                        <option value="Masculino">Masculino</option>
                        <option value="Femenino">Femenino</option>
                    </select>
                </div>
                <div>
                    <label class="block">Condiciones médicas:</label>
                    <textarea id="condiciones" class="w-full p-2 border rounded" placeholder="Condiciones médicas"></textarea>
                </div>
                <button type="submit" class="bg-blue-500 text-white p-2 rounded">Guardar Perfil</button>
            </form>
            <div id="profile-summary" class="mt-4 p-4 border rounded">
                <h3 class="font-bold">Resumen del Perfil</h3>
                <p>Nombre: --</p>
                <p>Fecha de Nacimiento: --</p>
                <p>Peso: -- kg</p>
                <p>Altura: -- cm</p>
                <p>Género: --</p>
                <p>Condiciones: --</p>
            </div>
        </div>

        <!-- Sección Presión Arterial -->
        <div id="presion" class="mb-8">
            <h2 class="text-xl font-bold mb-4">Registrar Presión Arterial</h2>
            <form id="pressure-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block">Fecha:</label>
                        <input type="date" id="pressure-fecha" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block">Hora:</label>
                        <input type="time" id="pressure-hora" class="w-full p-2 border rounded">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block">Presión Sistólica (mmHg):</label>
                        <input type="number" id="sistolica" class="w-full p-2 border rounded" placeholder="Sistólica">
                    </div>
                    <div>
                        <label class="block">Presión Diastólica (mmHg):</label>
                        <input type="number" id="diastolica" class="w-full p-2 border rounded" placeholder="Diastólica">
                    </div>
                    <div>
                        <label class="block">Pulso (lpm):</label>
                        <input type="number" id="pulso" class="w-full p-2 border rounded" placeholder="Pulso">
                    </div>
                </div>
                <div>
                    <label class="block">Notas:</label>
                    <textarea id="pressure-notas" class="w-full p-2 border rounded" placeholder="Notas"></textarea>
                </div>
                <button type="submit" class="bg-blue-500 text-white p-2 rounded">Registrar Medición</button>
            </form>
        </div>

        <!-- Sección Signos Vitales -->
        <div id="vitales" class="mb-8">
            <h2 class="text-xl font-bold mb-4">Registrar Signos Vitales</h2>
            <div class="flex flex-wrap gap-2 mb-4 vital-types">
                <button type="button" data-type="glucosa" class="p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Glucosa</button>
                <button type="button" data-type="peso" class="p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Peso</button>
                <button type="button" data-type="temperatura" class="p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">Temperatura</button>
                <button type="button" data-type="spo2" class="p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">SpO2</button>
                <button type="button" data-type="frespiratoria" class="p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">F. Respiratoria</button>
                <button type="button" data-type="pabdominal" class="p-2 bg-gray-200 rounded hover:bg-blue-500 hover:text-white">P. Abdominal</button>
            </div>
            <form id="vitals-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block">Fecha:</label>
                        <input type="date" id="vitals-fecha" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block">Hora:</label>
                        <input type="time" id="vitals-hora" class="w-full p-2 border rounded">
                    </div>
                </div>
                <div id="glucosa" class="vital-section space-y-2">
                    <h3 class="font-bold">Medición de Glucosa</h3>
                    <input type="number" id="glucosa-valor" class="w-full p-2 border rounded" placeholder="Valor de Glucosa (mg/dL)">
                    <input type="number" id="hba1c" class="w-full p-2 border rounded" placeholder="HbA1c (%)">
                </div>
                <div id="peso" class="vital-section space-y-2 hidden">
                    <h3 class="font-bold">Medición de Peso y Composición</h3>
                    <input type="number" id="peso-valor" class="w-full p-2 border rounded" placeholder="Peso (kg)">
                    <input type="number" id="grasa" class="w-full p-2 border rounded" placeholder="% Grasa Corporal">
                    <input type="number" id="muscular" class="w-full p-2 border rounded" placeholder="% Masa Muscular">
                    <input type="number" id="agua" class="w-full p-2 border rounded" placeholder="% Agua Corporal">
                </div>
                <div id="temperatura" class="vital-section space-y-2 hidden">
                    <h3 class="font-bold">Temperatura Corporal</h3>
                    <input type="number" id="temperatura-valor" class="w-full p-2 border rounded" placeholder="Temperatura (°C)">
                    <select id="metodo" class="w-full p-2 border rounded">
                        <option value="Oral">Oral</option>
                        <option value="Axilar">Axilar</option>
                        <option value="Rectal">Rectal</option>
                        <option value="Timpánico">Timpánico</option>
                        <option value="Temporal">Temporal</option>
                    </select>
                </div>
                <div id="spo2" class="vital-section space-y-2 hidden">
                    <h3 class="font-bold">Saturación de Oxígeno</h3>
                    <input type="number" id="spo2-valor" class="w-full p-2 border rounded" placeholder="SpO2 (%)">
                    <input type="number" id="frecuencia-card" class="w-full p-2 border rounded" placeholder="Frecuencia Cardíaca (lpm)">
                </div>
                <div id="frespiratoria" class="vital-section space-y-2 hidden">
                    <h3 class="font-bold">Frecuencia Respiratoria</h3>
                    <input type="number" id="respiraciones" class="w-full p-2 border rounded" placeholder="Respiraciones por minuto">
                    <select id="patron" class="w-full p-2 border rounded">
                        <option value="Normal">Normal</option>
                        <option value="Superficial">Superficial</option>
                        <option value="Profunda">Profunda</option>
                        <option value="Irregular">Irregular</option>
                        <option value="Dificultosa">Dificultosa</option>
                    </select>
                </div>
                <div id="pabdominal" class="vital-section space-y-2 hidden">
                    <h3 class="font-bold">Perímetro Abdominal</h3>
                    <input type="number" id="perimetro" class="w-full p-2 border rounded" placeholder="Perímetro (cm)">
                    <select id="momento" class="w-full p-2 border rounded">
                        <option value="Mañana (ayunas)">Mañana (ayunas)</option>
                        <option value="Noche">Noche</option>
                        <option value="Después de comida">Después de comida</option>
                    </select>
                </div>
                <div>
                    <label class="block">Notas:</label>
                    <textarea id="vitals-notas" class="w-full p-2 border rounded" placeholder="Notas"></textarea>
                </div>
                <button type="submit" class="bg-blue-500 text-white p-2 rounded">Registrar Medición Vital</button>
            </form>
        </div>

        <!-- Sección Control de Medicamentos -->
        <div id="medicamentos" class="mb-8">
            <h2 class="text-xl font-bold mb-4">Control de Medicamentos</h2>
            <h3 class="font-bold mb-2">Agregar Medicamento</h3>
            <form id="medications-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block">Nombre del Medicamento:</label>
                        <input type="text" id="med-nombre" class="w-full p-2 border rounded" placeholder="Nombre del Medicamento">
                    </div>
                    <div>
                        <label class="block">Dosis:</label>
                        <input type="text" id="dosis" class="w-full p-2 border rounded" placeholder="Dosis">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block">Frecuencia:</label>
                        <select id="frecuencia" class="w-full p-2 border rounded">
                            <option value="">Seleccionar frecuencia</option>
                            <option value="Una vez al día">Una vez al día</option>
                            <option value="Dos veces al día">Dos veces al día</option>
                            <option value="Tres veces al día">Tres veces al día</option>
                            <option value="Cuatro veces al día">Cuatro veces al día</option>
                            <option value="Personalizado">Personalizado</option>
                        </select>
                    </div>
                    <div>
                        <label class="block">Tipo:</label>
                        <select id="tipo" class="w-full p-2 border rounded">
                            <option value="Tableta/Cápsula">Tableta/Cápsula</option>
                            <option value="Líquido">Líquido</option>
                            <option value="Inyección">Inyección</option>
                            <option value="Tópico">Tópico</option>
                            <option value="Inhalador">Inhalador</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block">Horarios de administración:</label>
                    <input type="text" id="horarios" class="w-full p-2 border rounded" placeholder="Horarios de administración">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block">Fecha de inicio:</label>
                        <input type="date" id="fechaInicio" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block">Duración (días):</label>
                        <input type="number" id="duracion" class="w-full p-2 border rounded" placeholder="Duración (días)">
                    </div>
                </div>
                <div>
                    <label class="block">Indicaciones especiales:</label>
                    <textarea id="indicaciones" class="w-full p-2 border rounded" placeholder="Indicaciones especiales"></textarea>
                </div>
                <button type="submit" class="bg-blue-500 text-white p-2 rounded">Agregar Medicamento</button>
            </form>
            <div id="medications-list" class="mt-4 p-4 border rounded">
                <h3 class="font-bold">Medicamentos Actuales</h3>
                <div class="list-content"></div>
            </div>
        </div>

        <!-- Sección Dashboard de Análisis -->
        <div id="dashboard" class="mb-8">
            <h2 class="text-xl font-bold mb-4">Dashboard de Análisis</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 stats-grid">
                <div class="p-4 border rounded">
                    <p class="font-bold">Sistólica Promedio</p>
                    <p id="avg-sistolica">-- mmHg</p>
                </div>
                <div class="p-4 border rounded">
                    <p class="font-bold">Diastólica Promedio</p>
                    <p id="avg-diastolica">-- mmHg</p>
                </div>
                <div class="p-4 border rounded">
                    <p class="font-bold">Pulso Promedio</p>
                    <p id="avg-pulso">-- lpm</p>
                </div>
                <div class="p-4 border rounded">
                    <p class="font-bold">Total Mediciones</p>
                    <p id="total-mediciones">--</p>
                </div>
                <div class="p-4 border rounded">
                    <p class="font-bold">Glucosa Promedio</p>
                    <p id="avg-glucosa">-- mg/dL</p>
                </div>
                <div class="p-4 border rounded">
                    <p class="font-bold">Peso Actual</p>
                    <p id="avg-peso">-- kg</p>
                </div>
            </div>
            <div class="mb-4">
                <label class="block">Período de Análisis:</label>
                <select id="analysis-period" class="w-full p-2 border rounded">
                    <option value="Última Semana">Última Semana</option>
                    <option value="Último Mes">Último Mes</option>
                    <option value="Últimos 3 Meses">Últimos 3 Meses</option>
                    <option value="Todos los Registros">Todos los Registros</option>
                </select>
            </div>
            <div id="recommendations" class="p-4 border rounded">
                <h3 class="font-bold">Recomendaciones Personalizadas</h3>
                <p>Basado en tus mediciones, te recomendamos consultar a un médico si hay valores fuera de rango.</p>
            </div>
        </div>

        <!-- Sección Historial de Mediciones -->
        <div id="historial" class="mb-8">
            <h2 class="text-xl font-bold mb-4">Historial de Mediciones</h2>
            <div class="flex gap-4 mb-4">
                <button id="clear-data" class="bg-red-500 text-white p-2 rounded">Limpiar Datos</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div>
                    <label class="block">Filtrar por Fecha:</label>
                    <input type="date" id="filter-date" class="w-full p-2 border rounded">
                </div>
                <div>
                    <label class="block">Tipo de Medición:</label>
                    <select id="filter-type" class="w-full p-2 border rounded">
                        <option value="Todas las mediciones">Todas las mediciones</option>
                        <option value="Presión Arterial">Presión Arterial</option>
                        <option value="Glucosa">Glucosa</option>
                        <option value="Peso">Peso</option>
                        <option value="Temperatura">Temperatura</option>
                        <option value="SpO2">SpO2</option>
                        <option value="F. Respiratoria">F. Respiratoria</option>
                        <option value="P. Abdominal">P. Abdominal</option>
                    </select>
                </div>
                <div>
                    <label class="block">Filtrar por Riesgo:</label>
                    <select id="filter-risk" class="w-full p-2 border rounded">
                        <option value="Todos los niveles">Todos los niveles</option>
                        <option value="Normal">Normal</option>
                        <option value="Elevada">Elevada</option>
                        <option value="Hipertensión Etapa 1">Hipertensión Etapa 1</option>
                        <option value="Hipertensión Etapa 2">Hipertensión Etapa 2</option>
                        <option value="Crisis Hipertensiva">Crisis Hipertensiva</option>
                    </select>
                </div>
            </div>
            <div id="history-list" class="p-4 border rounded">
                <h3 class="font-bold">Registros</h3>
                <div class="list-content"></div>
            </div>
        </div>
    </div>

    <script>
        // Datos
        let profile = JSON.parse(localStorage.getItem('profile')) || {};
        let bloodPressure = JSON.parse(localStorage.getItem('bloodPressure')) || [];
        let vitals = JSON.parse(localStorage.getItem('vitals')) || [];
        let medications = JSON.parse(localStorage.getItem('medications')) || [];

        // Función para guardar datos en localStorage
        function saveData() {
            localStorage.setItem('profile', JSON.stringify(profile));
            localStorage.setItem('bloodPressure', JSON.stringify(bloodPressure));
            localStorage.setItem('vitals', JSON.stringify(vitals));
            localStorage.setItem('medications', JSON.stringify(medications));
        }

        // Función para calcular nivel de riesgo
        function getRiskLevel(sistolica, diastolica) {
            sistolica = parseFloat(sistolica);
            diastolica = parseFloat(diastolica);
            if (isNaN(sistolica) || isNaN(diastolica)) return 'Desconocido';
            if (sistolica >= 180 || diastolica >= 120) return 'Crisis Hipertensiva';
            if (sistolica >= 140 || diastolica >= 90) return 'Hipertensión Etapa 2';
            if (sistolica >= 130 || diastolica >= 80) return 'Hipertensión Etapa 1';
            if (sistolica >= 120 && diastolica < 80) return 'Elevada';
            return 'Normal';
        }

        // Renderizar resumen de perfil
        function renderProfileSummary() {
            const summary = document.getElementById('profile-summary');
            summary.innerHTML = `
                <h3 class="font-bold">Resumen del Perfil</h3>
                <p>Nombre: ${profile.nombre || '--'}</p>
                <p>Fecha de Nacimiento: ${profile.fechaNacimiento || '--'}</p>
                <p>Peso: ${profile.peso || '--'} kg</p>
                <p>Altura: ${profile.altura || '--'} cm</p>
                <p>Género: ${profile.genero || '--'}</p>
                <p>Condiciones: ${profile.condiciones || '--'}</p>
            `;
        }

        // Renderizar lista de medicamentos
        function renderMedicationsList() {
            const list = document.querySelector('#medications-list .list-content');
            list.innerHTML = '';
            medications.forEach(med => {
                const div = document.createElement('div');
                div.className = 'p-2 border-b';
                div.innerHTML = `
                    <p>${med.nombre || '--'} - ${med.dosis || '--'} (${med.frecuencia || '--'})</p>
                    <p>Tipo: ${med.tipo || '--'}</p>
                    <p>Horarios: ${med.horarios || '--'}</p>
                    <p>Inicio: ${med.fechaInicio || '--'} - Duración: ${med.duracion || '--'} días</p>
                    <p>Indicaciones: ${med.indicaciones || '--'}</p>
                `;
                list.appendChild(div);
            });
            if (medications.length === 0) {
                list.innerHTML = '<p>No hay medicamentos registrados.</p>';
            }
        }

        // Función para filtrar datos por período
        function filterByPeriod(data, period) {
            const now = new Date();
            return data.filter(item => {
                const itemDate = new Date(item.timestamp);
                if (period === 'Última Semana') return now - itemDate <= 7 * 86400000;
                if (period === 'Último Mes') return now - itemDate <= 30 * 86400000;
                if (period === 'Últimos 3 Meses') return now - itemDate <= 90 * 86400000;
                return true;
            });
        }

        // Calcular promedio
        function getAverage(data, key) {
            if (!data.length) return '--';
            const validData = data.filter(item => !isNaN(parseFloat(item[key])));
            if (!validData.length) return '--';
            const sum = validData.reduce((acc, item) => acc + parseFloat(item[key]), 0);
            return (sum / validData.length).toFixed(1);
        }

        // Renderizar dashboard
        function renderDashboard() {
            const period = document.getElementById('analysis-period').value;
            const filteredPressure = filterByPeriod(bloodPressure, period);
            const filteredVitals = filterByPeriod(vitals, period);

            document.getElementById('avg-sistolica').textContent = `${getAverage(filteredPressure, 'sistolica')} mmHg`;
            document.getElementById('avg-diastolica').textContent = `${getAverage(filteredPressure, 'diastolica')} mmHg`;
            document.getElementById('avg-pulso').textContent = `${getAverage(filteredPressure, 'pulso')} lpm`;
            document.getElementById('total-mediciones').textContent = filteredPressure.length + filteredVitals.length;
            document.getElementById('avg-glucosa').textContent = `${getAverage(filteredVitals.filter(v => v.type === 'Glucosa'), 'valor')} mg/dL`;
            document.getElementById('avg-peso').textContent = `${getAverage(filteredVitals.filter(v => v.type === 'Peso'), 'valor')} kg`;

            // Recomendaciones dinámicas simples
            const rec = document.querySelector('#recommendations p');
            let recText = 'Mantén un monitoreo regular.';
            if (filteredPressure.some(p => p.riesgo === 'Crisis Hipertensiva' || p.riesgo === 'Hipertensión Etapa 2')) {
                recText += ' Atención: Valores de presión altos detectados. Consulta a un médico.';
            }
            if (filteredVitals.some(v => v.type === 'Glucosa' && parseFloat(v.valor) > 200)) {
                recText += ' Atención: Niveles de glucosa elevados.';
            }
            rec.textContent = recText;
        }

        // Renderizar historial
        function renderHistory() {
            const filterDate = document.getElementById('filter-date').value;
            const filterType = document.getElementById('filter-type').value;
            const filterRisk = document.getElementById('filter-risk').value;

            const allData = [
                ...bloodPressure.map(p => ({ ...p, type: 'Presión Arterial' })),
                ...vitals
            ];

            const filtered = allData.filter(item => {
                let matches = true;
                if (filterDate && item.fecha !== filterDate) matches = false;
                if (filterType !== 'Todas las mediciones' && item.type !== filterType) matches = false;
                if (filterRisk !== 'Todos los niveles' && item.riesgo !== filterRisk) matches = false;
                return matches;
            });

            const list = document.querySelector('#history-list .list-content');
            list.innerHTML = '';
            filtered.forEach(item => {
                const div = document.createElement('div');
                div.className = 'p-2 border-b';
                let content = `<p>Fecha: ${item.fecha || '--'} ${item.hora || '--'}</p><p>Tipo: ${item.type}</p>`;
                if (item.type === 'Presión Arterial') {
                    content += `
                        <p>Presión: ${item.sistolica || '--'}/${item.diastolica || '--'} mmHg</p>
                        <p>Pulso: ${item.pulso || '--'} lpm</p>
                        <p>Riesgo: ${item.riesgo || '--'}</p>
                    `;
                } else {
                    if (item.valor) content += `<p>Valor: ${item.valor || '--'}</p>`;
                    if (item.hba1c) content += `<p>HbA1c: ${item.hba1c || '--'}%</p>`;
                    if (item.grasa) content += `<p>Grasa Corporal: ${item.grasa || '--'}%</p>`;
                    if (item.muscular) content += `<p>Masa Muscular: ${item.muscular || '--'}%</p>`;
                    if (item.agua) content += `<p>Agua Corporal: ${item.agua || '--'}%</p>`;
                    if (item.metodo) content += `<p>Método: ${item.metodo || '--'}</p>`;
                    if (item.spo2) content += `<p>SpO2: ${item.spo2 || '--'}%</p>`;
                    if (item.frecuencia) content += `<p>Frecuencia: ${item.frecuencia || '--'}</p>`;
                    if (item.patron) content += `<p>Patrón: ${item.patron || '--'}</p>`;
                    if (item.perimetro) content += `<p>Perímetro: ${item.perimetro || '--'} cm</p>`;
                    if (item.momento) content += `<p>Momento: ${item.momento || '--'}</p>`;
                }
                if (item.notas) content += `<p>Notas: ${item.notas || '--'}</p>`;
                div.innerHTML = content;
                list.appendChild(div);
            });
            if (filtered.length === 0) {
                list.innerHTML = '<p>No hay registros que coincidan con los filtros.</p>';
            }
        }

        // Inicializar
        window.addEventListener('load', () => {
            renderProfileSummary();
            renderMedicationsList();
            renderDashboard();
            renderHistory();

            // Perfil form
            document.getElementById('profile-form').addEventListener('submit', e => {
                e.preventDefault();
                profile = {
                    nombre: document.getElementById('nombre').value,
                    fechaNacimiento: document.getElementById('fechaNacimiento').value,
                    peso: document.getElementById('peso').value,
                    altura: document.getElementById('altura').value,
                    genero: document.getElementById('genero').value,
                    condiciones: document.getElementById('condiciones').value
                };
                saveData();
                renderProfileSummary();
            });

            // Pressure form
            document.getElementById('pressure-form').addEventListener('submit', e => {
                e.preventDefault();
                const entry = {
                    fecha: document.getElementById('pressure-fecha').value,
                    hora: document.getElementById('pressure-hora').value,
                    sistolica: document.getElementById('sistolica').value,
                    diastolica: document.getElementById('diastolica').value,
                    pulso: document.getElementById('pulso').value,
                    notas: document.getElementById('pressure-notas').value,
                    timestamp: new Date().toISOString(),
                    riesgo: getRiskLevel(document.getElementById('sistolica').value, document.getElementById('diastolica').value)
                };
                bloodPressure.push(entry);
                saveData();
                renderDashboard();
                renderHistory();
                e.target.reset();
            });

            // Vitals buttons
            document.querySelectorAll('.vital-types button').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.vital-section').forEach(sec => sec.classList.add('hidden'));
                    document.getElementById(btn.dataset.type).classList.remove('hidden');
                });
            });

            // Vitals form
            document.getElementById('vitals-form').addEventListener('submit', e => {
                e.preventDefault();
                const visibleSection = document.querySelector('.vital-section:not(.hidden)');
                if (!visibleSection) return alert('Selecciona un tipo de medición');
                let type = visibleSection.id;
                type = type.charAt(0).toUpperCase() + type.slice(1);
                if (type === 'Frespiratoria') type = 'F. Respiratoria';
                if (type === 'Pabdominal') type = 'P. Abdominal';
                if (type === 'Spo2') type = 'SpO2';
                const entry = {
                    type,
                    fecha: document.getElementById('vitals-fecha').value,
                    hora: document.getElementById('vitals-hora').value,
                    notas: document.getElementById('vitals-notas').value,
                    timestamp: new Date().toISOString()
                };
                switch (visibleSection.id) {
                    case 'glucosa':
                        entry.valor = document.getElementById('glucosa-valor').value;
                        entry.hba1c = document.getElementById('hba1c').value;
                        break;
                    case 'peso':
                        entry.valor = document.getElementById('peso-valor').value;
                        entry.grasa = document.getElementById('grasa').value;
                        entry.muscular = document.getElementById('muscular').value;
                        entry.agua = document.getElementById('agua').value;
                        break;
                    case 'temperatura':
                        entry.valor = document.getElementById('temperatura-valor').value;
                        entry.metodo = document.getElementById('metodo').value;
                        break;
                    case 'spo2':
                        entry.spo2 = document.getElementById('spo2-valor').value;
                        entry.frecuencia = document.getElementById('frecuencia-card').value;
                        break;
                    case 'frespiratoria':
                        entry.frecuencia = document.getElementById('respiraciones').value;
                        entry.patron = document.getElementById('patron').value;
                        break;
                    case 'pabdominal':
                        entry.perimetro = document.getElementById('perimetro').value;
                        entry.momento = document.getElementById('momento').value;
                        break;
                }
                vitals.push(entry);
                saveData();
                renderDashboard();
                renderHistory();
                e.target.reset();
            });

            // Medications form
            document.getElementById('medications-form').addEventListener('submit', e => {
                e.preventDefault();
                const entry = {
                    nombre: document.getElementById('med-nombre').value,
                    dosis: document.getElementById('dosis').value,
                    frecuencia: document.getElementById('frecuencia').value,
                    tipo: document.getElementById('tipo').value,
                    horarios: document.getElementById('horarios').value,
                    fechaInicio: document.getElementById('fechaInicio').value,
                    duracion: document.getElementById('duracion').value,
                    indicaciones: document.getElementById('indicaciones').value,
                    timestamp: new Date().toISOString()
                };
                medications.push(entry);
                saveData();
                renderMedicationsList();
                e.target.reset();
            });

            // Dashboard period change
            document.getElementById('analysis-period').addEventListener('change', renderDashboard);

            // History filters
            document.getElementById('filter-date').addEventListener('change', renderHistory);
            document.getElementById('filter-type').addEventListener('change', renderHistory);
            document.getElementById('filter-risk').addEventListener('change', renderHistory);

            // Clear data
            document.getElementById('clear-data').addEventListener('click', () => {
                if (confirm('¿Estás seguro de limpiar todos los datos?')) {
                    profile = {};
                    bloodPressure = [];
                    vitals = [];
                    medications = [];
                    saveData();
                    renderProfileSummary();
                    renderMedicationsList();
                    renderDashboard();
                    renderHistory();
                }
            });
        });
    </script>
</body>

</html>